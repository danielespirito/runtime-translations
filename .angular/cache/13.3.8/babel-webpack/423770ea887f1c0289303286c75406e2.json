{"ast":null,"code":"import _asyncToGenerator from \"/Users/alquemir/DEV/angular-i18n-demo/runtime-translations/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { registerLocaleData } from '@angular/common';\nimport { APP_INITIALIZER, LOCALE_ID } from '@angular/core';\nimport { loadTranslations } from '@angular/localize';\nimport * as i0 from \"@angular/core\";\nlet I18n = /*#__PURE__*/(() => {\n  class I18n {\n    constructor() {\n      this.locale = 'en';\n    }\n\n    setLocale() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        const userLocale = localStorage.getItem('locale'); // If the user has a preferred language stored in localStorage, use it.\n\n        if (userLocale) {\n          _this.locale = userLocale;\n        } // Use web pack magic string to only include required locale data\n\n\n        const localeModule = yield import(\n        /* webpackInclude: /(de|en|es)\\.mjs$/ */\n        `/node_modules/@angular/common/locales/${_this.locale}.mjs`); // Set locale for built in pipes, etc.\n\n        registerLocaleData(localeModule.default); // Load translation file\n\n        const localeTranslationsModule = yield import(`src/assets/i18n/${_this.locale}.json`); // Load translations for the current locale at run-time\n\n        loadTranslations(localeTranslationsModule.default);\n      })();\n    }\n\n  }\n\n  I18n.ɵfac = function I18n_Factory(t) {\n    return new (t || I18n)();\n  };\n\n  I18n.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: I18n,\n    factory: I18n.ɵfac,\n    providedIn: 'root'\n  }); // Load locale data at app start-up\n\n  return I18n;\n})();\n\nfunction setLocale() {\n  return {\n    provide: APP_INITIALIZER,\n    useFactory: i18n => () => i18n.setLocale(),\n    deps: [I18n],\n    multi: true\n  };\n} // Set the runtime locale for the app\n\n\nfunction setLocaleId() {\n  return {\n    provide: LOCALE_ID,\n    useFactory: i18n => i18n.locale,\n    deps: [I18n]\n  };\n}\n\nexport const I18nModule = {\n  setLocale: setLocale,\n  setLocaleId: setLocaleId\n};","map":null,"metadata":{},"sourceType":"module"}